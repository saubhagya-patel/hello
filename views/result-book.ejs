<%- include("../partials/header.ejs") %>

    <div class="container">
        <% if (locals.data) { %>
            <div class="px-4 py-5 text-center">
                <div class="d-flex justify-content-center align-items-center">
                    <img class="d-block mx-auto mb-4" src="https://covers.openlibrary.org/b/id/<%= data.cover_i %>.jpg?default=https://openlibrary.org/static/images/icons/avatar_book.png"
                        alt="bookImage" height="400px" width="auto">
                    <div class="container d-flex flex-column ">
                        <hr class="featurette-divider m-3">
                        <h1 class="display-5 fw-bold text-body-emphasis">
                            <%= data.title %>
                        </h1>
                        <p class="lead">
                            by <%= data.author_name ? data.author_name[0] : "Unknown" %>
                        </p>
                        <p class="info-para">
                            Published in : <%= data.first_publish_year %>
                        </p>
                        <hr class="featurette-divider m-3">
                    </div>
                </div>
                <div class="container mt-4">
                    <h4 class="text-body-emphasis">
                        Enter details for book below
                    </h4>
                </div>
            </div>

            <div class="mb-3">
                <!-- form to add book  -->
                <form action="/book/result-book/<%= isbn %>" method="post">

                    <input type="hidden" name="newIsbn" value="<%= isbn %>">
                    <input type="hidden" name="title" value="<%= data.title %>">
                    <input type="hidden" name="author" value="<%= data.author_name ? data.author_name[0] : "Unknown" %>">
                    <input type="hidden" name="year" value="<%= data.first_publish_year %>">
                    <input type="hidden" name="pages" value="<%= data.number_of_pages_median %>">
                    <input type="hidden" name="coverid" value="<%= data.cover_i %>">

                    <input type="number" name="rating" class="form-control m-3 mx-auto" id="rating" placeholder="Enter rating for the book">
                    <div class="mb-3">
                        <label for="review" class="form-label m-2">Enter summary/notes for the book : </label>
                        <textarea class="form-control" name="review" rows="3" autocomplete="off" placeholder="Enter summary/notes for the book">
                        </textarea>
                        <button id="postReviewButton" class="btn btn-primary mt-3" type="submit">
                            Add Book
                        </button>
                    </div>
                </form>
            </div>
    </div>


            <% }else { %>
                <div class="h-100 d-flex align-items-center justify-content-center">
                    <p class="lead">
                        Sorry canot display book data.
                        Some error occurred.
                    </p>
                </div>
            <% } %>


    <%- include("../partials/footer.ejs") %>